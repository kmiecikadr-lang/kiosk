<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Oce≈Ñ wizytƒô</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden}.container{text-align:center;padding:20px;width:100%}h1{color:white;font-size:3rem;margin-bottom:60px;text-shadow:2px 2px 8px rgba(0,0,0,0.3)}.buttons{display:flex;gap:30px;justify-content:center;flex-wrap:wrap}.buttons button{width:200px;height:250px;border:none;border-radius:20px;font-size:6rem;cursor:pointer;transition:transform .2s;box-shadow:0 10px 30px rgba(0,0,0,0.3)}.buttons button:active{transform:scale(.95)}.happy{background:linear-gradient(135deg,#11998e,#38ef7d)}.neutral{background:linear-gradient(135deg,#ffd89b,#ff9a56)}.sad{background:linear-gradient(135deg,#ee0979,#ff6a00)}.thank{display:none;color:white;font-size:5rem}.fullscreen-prompt{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999}.fullscreen-btn{background:linear-gradient(135deg,#11998e,#38ef7d);color:white;border:none;padding:30px 60px;font-size:2rem;font-weight:700;border-radius:20px;cursor:pointer;box-shadow:0 10px 40px rgba(0,0,0,0.3);transition:transform .2s}.fullscreen-btn:active{transform:scale(.95)}.fullscreen-text{color:white;font-size:1.5rem;margin-bottom:40px;text-align:center;padding:0 20px}.hidden{display:none!important}.mercedes-star{font-size:4rem;margin-bottom:20px}
</style>
</head>
<body>
<div id="fullscreenPrompt" class="fullscreen-prompt">
<div class="mercedes-star">‚≠ê</div>
<div class="fullscreen-text">Dotknij aby uruchomiƒá kiosk<br>w trybie pe≈Çnoekranowym</div>
<button class="fullscreen-btn" onclick="enterFullscreen()">‚≠ê URUCHOM KIOSK</button>
</div>
<div id="app" class="container hidden">
<div id="main">
<h1>Jak oceniasz wizytƒô?</h1>
<div class="buttons">
<button class="happy" onclick="vote(1)">üòä</button>
<button class="neutral" onclick="vote(2)">üòê</button>
<button class="sad" onclick="vote(3)">‚òπÔ∏è</button>
</div>
</div>
<div id="thank" class="thank">‚úì Dziƒôkujemy!</div>
</div>
<script>
let deviceId=localStorage.getItem('device_id')||'xxxxxxxx-xxxx-4xxx'.replace(/x/g,()=>(Math.random()*16|0).toString(16));
localStorage.setItem('device_id',deviceId);

function enterFullscreen(){
  const elem = document.documentElement;
  if(elem.requestFullscreen){
    elem.requestFullscreen();
  }else if(elem.webkitRequestFullscreen){
    elem.webkitRequestFullscreen();
  }
  document.getElementById('fullscreenPrompt').classList.add('hidden');
  document.getElementById('app').classList.remove('hidden');
}

function vote(reaction){
  fetch('/api/response',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({reaction,device_id:deviceId,timestamp:new Date().toISOString()})
  });
  document.getElementById('main').style.display='none';
  document.getElementById('thank').style.display='block';
  setTimeout(()=>{
    document.getElementById('main').style.display='block';
    document.getElementById('thank').style.display='none';
  },1500);
}

document.addEventListener('fullscreenchange',()=>{
  if(!document.fullscreenElement && !document.webkitFullscreenElement){
    document.getElementById('app').classList.add('hidden');
    document.getElementById('fullscreenPrompt').classList.remove('hidden');
  }
});
</script>
</body>
</html>
